# === CONFIGURATION FILE FOR POWER_MANAGER.SH ===

# A space-separated list of IP addresses for the sentinel hosts.
# These should be reliable devices on grid power (not on the UPS).
# Example: Smart plugs, IoT devices, a printer, etc.
SENTINEL_HOSTS="192.168.1.11 192.168.1.12 192.168.1.13 192.168.1.14"

# The time in minutes to wait after power is restored before sending WoL packets.
# This prevents waking servers during unstable power conditions (flickering).
WOL_DELAY_MINUTES=5

# The path to the dummy-ups driver's state file
UPS_STATE_FILE="/var/run/nut/virtual.device"

# Default broadcast address for WoL packets if not specified per host
DEFAULT_BROADCAST_IP="192.168.1.255"

# The secret token for API authentication.
# This MUST match the API_TOKEN used by UPS_monitor clients.
API_TOKEN="your_super_secret_api_token"

# Enable Power Outage Simulation mode.
# When set to "true", this will force the UPS status to "OB LB" regardless
# of the sentinel hosts' status. Useful for testing shutdown procedures.
# Valid values: "true" or "false".
POWER_SIMULATION_MODE="false"

# === SMTP NOTIFICATIONS ===
# SMTP_SERVER="smtp.example.com"
# SMTP_PORT="587"
# SMTP_USER="user@example.com"
# SMTP_PASSWORD="your_password"
# SMTP_SENDER='"UPS Server" <ups@example.com>'
# SMTP_RECIPIENTS="admin@example.com,support@example.com"

# === NOTIFICATION SETTINGS ===
# Enable or disable notifications for specific events. Valid values: "true" or "false".
# NOTIFY_POWER_FAIL="true"
# NOTIFY_POWER_RESTORED="true"
# NOTIFY_CLIENT_SHUTDOWN="true"
# NOTIFY_CLIENT_STALE="true"
# NOTIFY_APP_ERROR="true"
# NOTIFY_SIMULATION_MODE="true"

# === WAKE-ON-LAN HOST DEFINITIONS ===
# Define each host that should be awakened after power restoration
# Each host should have its own section with the following parameters:
# NAME - A descriptive name for the host (for logging purposes)
# IP - The IP address of the host
# MAC - The MAC address of the host (use colons as separators)
# BROADCAST_IP - (Optional) Specific broadcast IP for this host

[WAKE_HOST_1]
NAME=Synology NAS
IP=192.168.2.12
MAC=00:11:32:f8:af:9f
BROADCAST_IP=192.168.2.255
SHUTDOWN_DELAY_MINUTES=10

[WAKE_HOST_2]
NAME=Proxmox Virtual Environment
IP=192.168.1.13
MAC=00:11:32:2c:31:42
SHUTDOWN_DELAY_MINUTES=5

[WAKE_HOST_3]
NAME=File Server
IP=192.168.1.15
MAC=00:11:32:aa:bb:cc
BROADCAST_IP=192.168.1.255
SHUTDOWN_DELAY_MINUTES=15

# === POWER OUTAGE SIMULATION SCHEDULES ===
#
# Each schedule must have its own section [SCHEDULE_X]
#
# Parameters:
# NAME - A descriptive name for the schedule.
# TYPE - "one-time" or "recurring".
# DATE - (for one-time) The date in YYYY-MM-DD format.
# DAY_OF_WEEK - (for recurring) The day: "monday", "tuesday", ..., "sunday", or "everyday".
# TIME - The time in HH:MM format (24-hour).
# ACTION - "start" or "stop" the simulation.
# ENABLED - "true" or "false". One-time schedules are automatically disabled after running.

# [SCHEDULE_1]
# NAME="Weekly Test Shutdown"
# TYPE="recurring"
# DAY_OF_WEEK="friday"
# TIME="23:00"
# ACTION="start"
# ENABLED="true"

# [SCHEDULE_2]
# NAME="Weekly Test Power On"
# TYPE="recurring"
# DAY_OF_WEEK="saturday"
# TIME="01:00"
# ACTION="stop"
# ENABLED="true"

# [SCHEDULE_3]
# NAME="One-time Maintenance"
# TYPE="one-time"
# DATE="2025-12-24"
# TIME="22:00"
# ACTION="start"
# ENABLED="true"